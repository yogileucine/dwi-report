{"uid":"d50a638e34eaa39c","name":"Test to verify that user gets expected error message when trying to complete task having interlocks with date property and task completed trigger","fullName":"tests.scenarios.job.test_interlocks_execution.TestInterlocksExecution#test_validate_expected_error_while_execution_of_task_interlocks_with_date_property_and_task_completed_trigger","historyId":"3ef22e154ad1aa84d4b594acd63a4041","time":{"start":1733759372892,"stop":1733759390952,"duration":18060},"description":"This test case tests that the user gets expected error message when trying to complete task having interlocks with date property and task completed trigger","descriptionHtml":"<p>This test case tests that the user gets expected error message when trying to complete task having interlocks with date property and task completed trigger</p>\n","status":"failed","statusMessage":"AssertionError: {\"timestamp\":1733759390,\"object\":\"OBJECT\",\"status\":\"OK\",\"message\":\"success\",\"data\":{\"id\":\"565564097483218944\",\"period\":null,\"orderTree\":1,\"correctionReason\":null,\"correctionEnabled\":false,\"reason\":null,\"assignees\":[{\"userId\":\"1701115962\",\"employeeId\":\"L-process.publisher.03\",\"firstName\":\"Malini\",\"lastName\":\"L\",\"email\":\"pp.03@mailinator.com\",\"userGroupId\":null,\"userGroupName\":null,\"userGroupDescription\":null,\"state\":\"IN_PROGRESS\",\"actionPerformed\":true}],\"userGroupAssignees\":[],\"startedBy\":{\"id\":\"1701115962\",\"employeeId\":\"L-process.publisher.03\",\"firstName\":\"Malini\",\"lastName\":\"L\"},\"startedAt\":1733759389,\"endedAt\":1733759390,\"endedBy\":{\"id\":\"1701115962\",\"employeeId\":\"L-process.publisher.03\",\"firstName\":\"Malini\",\"lastName\":\"L\"},\"state\":\"COMPLETED\",\"type\":\"MASTER\",\"audit\":{\"modifiedAt\":1733759390,\"modifiedBy\":{\"id\":null,\"employeeId\":\"L-process.publisher.03\",\"firstName\":\"Malini\",\"lastName\":\"L\"}},\"hide\":null,\"show\":null,\"correctedBy\":null,\"correctedAt\":null,\"duration\":null,\"pauseReasons\":[],\"continueRecurrence\":false,\"recurringExpectedStartedAt\":null,\"recurringExpectedDueAt\":null,\"recurringPrematureStartReason\":null,\"recurringOverdueCompletionReason\":\"\",\"schedulingExpectedStartedAt\":null,\"schedulingExpectedDueAt\":null,\"scheduleOverdueCompletionReason\":\"\",\"schedulePrematureStartReason\":\"\",\"scheduledTaskExecutionIds\":[],\"executedAutomations\":[],\"recurredTaskExecutionId\":null,\"taskPauseResumeAudits\":[]}}","statusTrace":"self = <test_interlocks_execution.TestInterlocksExecution object at 0x7b6d60d6dd60>, user_group_creation = 'Auto_Test_user_group_TestInterlocksExecution_884', job_execution_by = 'user', users_list = ['process.publisher.03']\n\n    @allure.title(\"Test to verify that user gets expected error message when trying to complete task having \"\n                  \"interlocks with date property and task completed trigger\")\n    @allure.description(\"This test case tests that the user gets expected error message when trying to complete task \"\n                        \"having interlocks with date property and task completed trigger\")\n    @allure.link(\"https://app.clickup.com/t/86cur1wtm\")\n    @pytest.mark.scenario\n    @pytest.mark.job\n    @pytest.mark.interlocks\n    @pytest.mark.validate_expected_error_while_execution_of_task_interlocks_with_date_property_and_task_completed_trigger\n    @pytest.mark.parametrize(\"job_execution_by, users_list\",\n                             [(\"user\", [Env.get_env_data(\"QA_PUBLISHER_USERNAME_01\")]), (\"user_group\", [])])\n    def test_validate_expected_error_while_execution_of_task_interlocks_with_date_property_and_task_completed_trigger(\n            self, user_group_creation, job_execution_by, users_list):\n        process_data = self.process_obj.test_adding_interlocks_on_date_property_with_trigger_set_at_the_completion_of_task()\n        object_data_01, display_name = object_type_objects.test_create_objects(\n            {process_data[\"properties\"][\"title_display_name\"]: \"object_01\",\n             process_data[\"properties\"][\"single_line_property\"]: \"single_line\",\n             process_data[\"properties\"][\"multi_line_property\"]: \"multi_line\",\n             process_data[\"properties\"][\"number_property\"]: \"100\",\n             process_data[\"properties\"][\"multi_select_property\"]: [\n                 process_data[\"properties\"][\"multi_select_option\"]],\n             process_data[\"properties\"][\"single_select_property\"]: process_data[\"properties\"][\n                 \"single_select_option\"],\n             process_data[\"properties\"][\"date_property\"]: ((datetime.now().date()) - timedelta(days=11)).strftime(\n                 \"%d-%m-%Y\")},\n            process_data[\"properties\"][\"display_name\"])\n    \n        object_data_02, display_name = object_type_objects.test_create_objects(\n            {process_data[\"properties\"][\"title_display_name\"]: \"object_01\",\n             process_data[\"properties\"][\"single_line_property\"]: \"single_line\",\n             process_data[\"properties\"][\"multi_line_property\"]: \"multi_line\",\n             process_data[\"properties\"][\"number_property\"]: \"100\",\n             process_data[\"properties\"][\"multi_select_property\"]: [\n                 process_data[\"properties\"][\"multi_select_option\"]],\n             process_data[\"properties\"][\"single_select_property\"]: process_data[\"properties\"][\n                 \"single_select_option\"],\n             process_data[\"properties\"][\"date_property\"]: ((datetime.now().date()) + timedelta(days=11)).strftime(\n                 \"%d-%m-%Y\")},\n            process_data[\"properties\"][\"display_name\"])\n    \n        login(Env.get_env_data(\"QA_PUBLISHER_USERNAME_01\"), Env.get_env_data(\"QA_PUBLISHER_PASSWORD_01\"))\n        select_facility(const.FACILITY_NAME)\n        select_usecase(const.USECASE_NAME)\n        self.job_obj.assign_user_and_user_group_to_process(job_execution_by, users_list, user_group_creation,\n                                                           all_task_assignmnet=True)\n        self.job_obj.create_job()\n    \n        self.job_obj.start_job()\n        self.job_obj.start_task(task_name_01)\n        self.job_obj.execute_parameter(task_name_01, process_data[\"res_param_01\"],\n                                       data={\"value\": object_data_01[\"displayName\"]})\n>       error_message = self.job_obj.complete_task(task_name_01, negative_testcase=True)\n\ntests/scenarios/job/test_interlocks_execution.py:680: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ntests/unit/execution/jobs.py:677: in complete_task\n    status_400(response)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nresponse = <Response [200]>\nmessage = '{\"timestamp\":1733759390,\"object\":\"OBJECT\",\"status\":\"OK\",\"message\":\"success\",\"data\":{\"id\":\"565564097483218944\",\"period...\"\",\"scheduledTaskExecutionIds\":[],\"executedAutomations\":[],\"recurredTaskExecutionId\":null,\"taskPauseResumeAudits\":[]}}'\n\n    def status_400(response, message=None):\n        if message is None:\n            message = response.text\n>       assert response.status_code == 400, response.text\nE       AssertionError: {\"timestamp\":1733759390,\"object\":\"OBJECT\",\"status\":\"OK\",\"message\":\"success\",\"data\":{\"id\":\"565564097483218944\",\"period\":null,\"orderTree\":1,\"correctionReason\":null,\"correctionEnabled\":false,\"reason\":null,\"assignees\":[{\"userId\":\"1701115962\",\"employeeId\":\"L-process.publisher.03\",\"firstName\":\"Malini\",\"lastName\":\"L\",\"email\":\"pp.03@mailinator.com\",\"userGroupId\":null,\"userGroupName\":null,\"userGroupDescription\":null,\"state\":\"IN_PROGRESS\",\"actionPerformed\":true}],\"userGroupAssignees\":[],\"startedBy\":{\"id\":\"1701115962\",\"employeeId\":\"L-process.publisher.03\",\"firstName\":\"Malini\",\"lastName\":\"L\"},\"startedAt\":1733759389,\"endedAt\":1733759390,\"endedBy\":{\"id\":\"1701115962\",\"employeeId\":\"L-process.publisher.03\",\"firstName\":\"Malini\",\"lastName\":\"L\"},\"state\":\"COMPLETED\",\"type\":\"MASTER\",\"audit\":{\"modifiedAt\":1733759390,\"modifiedBy\":{\"id\":null,\"employeeId\":\"L-process.publisher.03\",\"firstName\":\"Malini\",\"lastName\":\"L\"}},\"hide\":null,\"show\":null,\"correctedBy\":null,\"correctedAt\":null,\"duration\":null,\"pauseReasons\":[],\"continueRecurrence\":false,\"recurringExpectedStartedAt\":null,\"recurringExpectedDueAt\":null,\"recurringPrematureStartReason\":null,\"recurringOverdueCompletionReason\":\"\",\"schedulingExpectedStartedAt\":null,\"schedulingExpectedDueAt\":null,\"scheduleOverdueCompletionReason\":\"\",\"schedulePrematureStartReason\":\"\",\"scheduledTaskExecutionIds\":[],\"executedAutomations\":[],\"recurredTaskExecutionId\":null,\"taskPauseResumeAudits\":[]}}\n\nutil/validate_response.py:10: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"env_setup","time":{"start":1733752687376,"stop":1733752687376,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"login_fixture","time":{"start":1733752687376,"stop":1733752687642,"duration":266},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"get_facility","time":{"start":1733752687642,"stop":1733752687801,"duration":159},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"select_usecase_fixture","time":{"start":1733752687801,"stop":1733752687918,"duration":117},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"username_to_user_id_mapping","time":{"start":1733752687918,"stop":1733752688451,"duration":533},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"user_group_creation","time":{"start":1733758934808,"stop":1733758935427,"duration":619},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"flush_param_counters","time":{"start":1733759372892,"stop":1733759372892,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"flush_param_counters::0","time":{"start":1733759390985,"stop":1733759390985,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"validate_expected_error_while_execution_of_task_interlocks_with_date_property_and_task_completed_trigger"},{"name":"tag","value":"interlocks"},{"name":"tag","value":"job"},{"name":"tag","value":"scenario"},{"name":"parentSuite","value":"tests.scenarios.job"},{"name":"suite","value":"test_interlocks_execution"},{"name":"subSuite","value":"TestInterlocksExecution"},{"name":"host","value":"ubuntu"},{"name":"thread","value":"53959-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.scenarios.job.test_interlocks_execution"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"job_execution_by","value":"'user'"},{"name":"users_list","value":"['process.publisher.03']"}],"links":[{"name":"https://app.clickup.com/t/86cur1wtm","url":"https://app.clickup.com/t/86cur1wtm","type":"link"}],"hidden":true,"retry":true,"extra":{"categories":[],"tags":["scenario","validate_expected_error_while_execution_of_task_interlocks_with_date_property_and_task_completed_trigger","job","interlocks"]},"source":"d50a638e34eaa39c.json","parameterValues":["'user'","['process.publisher.03']"]}